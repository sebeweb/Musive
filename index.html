<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title></title>
        <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"/>
        <link href="jquery-ui.css" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="./style.css"/>
    </head>
    <body>        
        <video id="vid" width="560" height="315" controls>
            <source src="http://ie.microsoft.com/testdrive/ieblog/2011/nov/pp4_blog_demo.mp4" >
        </video>
        <input id="start" type="number"/>
        <input id="end" type="number"/>
        <div class="cons">
            <div class="min">
                <div id="slider">

                </div>
            </div>
        </div>
        <script src="./script.js"></script>
        <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
        <script src="jquery-ui.js"></script>
        <script>
            $(".cons").width($("video").width());
            $(".min").css({"padding": "5%", "backgroundColor": "gainsboro"});
            var video = document.getElementById("vid");
            $("#slider").slider({
                range: true,
                min: 0,
                values: [0, 100],
                slide: function slide(event, ui) {
//                    var min = $("#slider").slider("option", "min", video.currentTime);
//                    var max = $("#slider").slider("option", "max", video.duration);
//                    $("#slider").slider("option", "values", [min, video.duration]);
//                   var max = $(".selector").slider("option", "max");
//                    var start = $("#start").val(ui.values[0]);
                    var start = ui.values[0];
                    var end = ui.values[1];
//                    var start = min;
//                    var end = max;
                    if (start >= 0) {
                        video.currentTime = start;
                        video.play();
                        video.loop = true;
                        boucle(start, end);
                    }
                }
            });

//            var values = $("#slider").slider("values");
//            $("#start").val(values[0]);
//            $("#end").val(values[1]);

//            $("#start").change(function () {
////                alert(video);
//                video.currentTime = $("#start").val();
//                video.play();
//                video.loop = true;
//                $(video).on('timeupdate', function () {
//                    if (Math.round(video.currentTime) == $('#end').val()) {
//                        video.currentTime = $("#start").val();
//                        video.play();
//                    }
//                });
//            });
            function boucle(debut, fin) {
                alert(debut);
                $(video).on('timeupdate', function () {
//                    var start = $("#start").val(fin);
                    if (Math.round(video.currentTime) == fin) {
                        video.currentTime = debut;
                        video.play();
                    }
                });
            }
        </script>
    </body>
</html>
